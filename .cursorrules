# Tricordarr Project Context

This is a React Native app - a Twitarr client built with TypeScript.

## Refresh Control

**Always use the `useRefresh` hook for managing refreshing state with RefreshControl.**

The `useRefresh` hook (located at `src/Hooks/useRefresh.ts`) should be used for all pull-to-refresh functionality. Do NOT use `isFetching` from React Query queries directly with RefreshControl.

### Why?
Background refetches (e.g., from `NotificationDataPoller` polling every 2 minutes) will cause `isFetching` to toggle, making the RefreshControl spinner appear/disappear quickly and causing screen jumping on iOS. The `useRefresh` hook ensures the spinner only shows during user-initiated pull-to-refresh actions.

### Usage:
```ts
const {refreshing, setRefreshing, onRefresh} = useRefresh({
  refresh: refetch, // Can pass React Query refetch directly
  isRefreshing: isFetching, // optional external signal
});

// Use with AppRefreshControl
<AppRefreshControl refreshing={refreshing} onRefresh={onRefresh} />
```

### React Query State Usage:
- `isLoading`: no cache and in flight â†’ Return `<LoadingView />`
- `isRefetching`: Background refetch (excluding initial) and `refetch()`
- `isFetching`: Catchall for any time the query function is running. Use for debugging or other non-UI purposes, NOT for RefreshControl
- `isFetchingNextPage`/`isFetchingPreviousPage`: Only for pagination indicators, NOT RefreshControl
- Always use `useRefresh` hook for all `RefreshControl` components

## RefreshControl Component

React Native (as of 0.82+) `RefreshControl` does not support `enabled` on iOS. Always use `AppRefreshControl` from `src/Components/Controls/AppRefreshControl.tsx` which returns null when disabled (an AI-recommended pattern).

## API Details
- All dates from the Swiftarr API come in as ISO8601 strings

## Clipboard
iOS doesn't provide clipboard feedback. Use the `useClipboard()` hook from `src/Hooks/useClipboard.ts` which provides feedback.

## Project Structure
- Components are in `src/Components/`
- Screens are in `src/Screens/`
- Queries are in `src/Queries/`
- Hooks are in `src/Hooks/`
- Context is in `src/Context/`
